<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Between</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  background: #f2f2f2;
  font-family: system-ui, -apple-system, BlinkMacSystemFont,
               "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  overflow: hidden;
  transition: background 0.25s ease;
}

/* 起動文 */
#startup-message {
  position: absolute;
  top: 46%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.45em;
  letter-spacing: 0.05em;
  color: #555;
  opacity: 0;
  pointer-events: none;
  white-space: nowrap;
  transition: opacity 1.2s ease;
}

#startup-message.show {
  opacity: 0.9;
}
</style>
</head>

<body>

<div id="startup-message">ここに、私はいる</div>

<script>
// ===== 初回起動文 =====
(() => {
  const KEY = "between_first_launch";
  const message = document.getElementById("startup-message");

  if (!localStorage.getItem(KEY)) {
    localStorage.setItem(KEY, "true");

    requestAnimationFrame(() => {
      message.classList.add("show");
    });

    setTimeout(() => {
      message.classList.remove("show");
    }, 2700); // 表示＋余韻
  }
})();

// ===== 点の生成 =====
let touching = false;

document.addEventListener("touchstart", () => {
  if (touching) return;
  touching = true;

  const dot = document.createElement("div");
  const size = Math.random() * 13 + 12; // 12〜25px

  dot.style.width = size + "px";
  dot.style.height = size + "px";
  dot.style.background = "#aaa";
  dot.style.borderRadius = "50%";
  dot.style.position = "absolute";
  dot.style.left = Math.random() * window.innerWidth + "px";
  dot.style.top = Math.random() * window.innerHeight + "px";
  dot.style.opacity = "0";
  dot.style.transition = "opacity 1s ease";

  document.body.appendChild(dot);

  // フェードイン
  requestAnimationFrame(() => {
    dot.style.opacity = "0.85";
  });

  // 表示 → 消滅
  setTimeout(() => {
    dot.style.opacity = "0";

    // 気配（20%）
    if (Math.random() < 0.2) {
      document.body.style.background = "#ededed";
      setTimeout(() => {
        document.body.style.background = "#f2f2f2";
      }, 250);
    }

    setTimeout(() => {
      dot.remove();
    }, 1000);

  }, 30000); // 30秒表示

  setTimeout(() => {
    touching = false;
  }, 400);
});
</script>

</body>
</html>
